<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Tuning/Tuning description">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Tuning Guide for 0602 version controller (Gyro D) | Rotorflight</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/docs/Tuning/Tuning description"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tuning Guide for 0602 version controller (Gyro D) | Rotorflight"><meta data-rh="true" name="description" content="This guide assumes no super low frequency (&lt; 60Hz) global LPF"><meta data-rh="true" property="og:description" content="This guide assumes no super low frequency (&lt; 60Hz) global LPF"><link data-rh="true" rel="icon" href="/img/rffavicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/docs/Tuning/Tuning description"><link data-rh="true" rel="alternate" href="https://github.com/docs/Tuning/Tuning description" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/docs/Tuning/Tuning description" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Rotorflight RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Rotorflight Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce2d6b70.css">
<link rel="preload" href="/assets/js/runtime~main.8c71fdc7.js" as="script">
<link rel="preload" href="/assets/js/main.6d28e338.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Rotorflight_outline.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Rotorflight_outline_dark.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Rotorflight</b></a><a class="navbar__item navbar__link" href="/docs/Tutorial - Quickstart/Quickstart 1">Tutorial</a><a class="navbar__item navbar__link" href="/docs/Manufacturers/intro">Manufacturers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Tuning/intro">Tuning</a><a class="navbar__item navbar__link" href="/docs/Developers/intro">Developers</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/rotorflight" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Tuning/intro">Tuning</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/intro">Tuning Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/Tune Feedforward">Tune Feedforward</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Tuning/Tuning description">Tuning Guide for 0602 version controller (Gyro D)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/Test flight">Test flight</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/Tune Cyclic">Tune Cyclic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/Tune the Tail">Tune the Tail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tuning/Motorised Tail and TTA">Motorised Tail and TTA</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tuning</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tuning Guide for 0602 version controller (Gyro D)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Tuning Guide for 0602 version controller (Gyro D)</h1><p>This guide assumes no super low frequency (&lt; 60Hz) global LPF</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-should-i-start-tuning">How should I start tuning?<a href="#how-should-i-start-tuning" class="hash-link" aria-label="Direct link to How should I start tuning?" title="Direct link to How should I start tuning?">​</a></h2><ul><li>The default value of the PIDF control loop is very conservative. You may notice that the helicopter is difficult to fly because the controller is not doing much.  </li><li>After confirming that the filters have cleaned up the gyro readout, the first step is simply increase the P and I gain on all three axis until they hold their position relatively well. The P value usually range from 20 to 60 and the I value usually range from 120 to 300.  </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="roll-tuning">Roll tuning<a href="#roll-tuning" class="hash-link" aria-label="Direct link to Roll tuning" title="Direct link to Roll tuning">​</a></h2><ul><li>Tune the roll axis first. Increase the P gain until roll feels solid at stops.  </li><li>Increase I gain until the helicopter stop significant drifting during long pitch pumps. You would find that the drift may never go away. Therefore, the I gain should be around when diminishing return begins.</li><li>Finally, tune the Feed Forward (FF) gain using continuous rolls. Lower the FF gain until there I windup occurs when stopping after a few continuous flips at max rate, then dial the FF gain back to when it just disappear.</li><li>Usually the roll axis does not require a lot of D-gain because the relatively low inertia. Add D gain if the helicopter oscillates at aileron hard stops.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pitch-tuning">Pitch tuning<a href="#pitch-tuning" class="hash-link" aria-label="Direct link to Pitch tuning" title="Direct link to Pitch tuning">​</a></h2><ul><li>The pitch axis is usually more difficult to tune due to the inherently high inertia and underdamping. This results I-term oscillation during stops and high disturbance (rainbow / tick-tock stops). The main solution to this problem is the D-gain. However, D-gain is very sensitive to noise, therefore it is advised to find the upper limit of D gain first before adjusting other parameters. </li><li>Increase D-gain until the helicopter just start to fast oscillate like a dog shaking water which usually happens around 600-700 with good filters. Then dial-back by around 30%. This D gain would be the limiter of other gains on pitch axis.  </li><li>Next, Increase P gain until a relatively good response time. Increase I gain until the helicopter stops significant drifting during long pitch pumps.  </li><li>It is very likely that after this procedure, you will see large but slow oscillations at hard stops. If the oscillation is fast, tune down the P gain.
To fix the slow oscillation, it is time to use a new parameter: I-relax. DECREASE I-relax on pitch until there is little oscillation during stops.</li><li>Finally, Tune the FF gain by watching the stop after continuous flips. Tune to a value that the I-windup just disappears.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="yaw-tuning">Yaw tuning<a href="#yaw-tuning" class="hash-link" aria-label="Direct link to Yaw tuning" title="Direct link to Yaw tuning">​</a></h2><ul><li>The yaw tuning is relatively simple. First try to find the maximum P gain on the tail by increasing until fast oscillation and dial back by roughly 20%. Then increase I gain so that it holds position well when hovering, and maintains a good constant rotation speed. D-gain and FF-gain are usually set to zero on tail.  </li><li>Next, tune the CW and CCW stop gains. Too high may results oscillation during stops, too low may result wandering or slow bounce back during stops.  </li><li>Then, tune the collective feedforward gain by watching the tail during climb up and fast pitch pumps. The helicopter should not rotate CW (tail goes left) right after pitch pump, and it should maintain a relatively good position during climb ups (there might be a little CCW after it starts climbing and slow bounce back at the end, this is normal)  </li><li>Finally, decrease the cyclic feedforward if CW initial motion is observed when applying cyclic stick inputs, and increase if CCW initial motion is observed.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rates-smoothness">Rates smoothness<a href="#rates-smoothness" class="hash-link" aria-label="Direct link to Rates smoothness" title="Direct link to Rates smoothness">​</a></h2><ul><li>During piroflips, one may feel that the cyclic has slight wobbles. Increasing <code>rates_smoothness</code> in CLI would help with that given the PID loop is tuned well.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-notes">Other notes<a href="#other-notes" class="hash-link" aria-label="Direct link to Other notes" title="Direct link to Other notes">​</a></h2><ul><li>The best tuning one could achieve in this version should be stable on the cyclic during stationary flips with a little tail wag. The cyclic should give confidence as it will very accurately follow the command, making flying very low easier. It could have some wobbles at stops of pirouetting pitch pumps. It also could have large wobbles during tick-tock stops.  </li><li>If you feel that the helicopter is &quot;flighting you&quot; or &quot;doesn&#x27;t want to move&quot; on the cyclic input during tail-down tick-tocks, increase I gain on pitch.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tuning/Tuning description.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Tuning/Tune Feedforward"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tune Feedforward</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Tuning/Test flight"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Test flight</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-should-i-start-tuning" class="table-of-contents__link toc-highlight">How should I start tuning?</a></li><li><a href="#roll-tuning" class="table-of-contents__link toc-highlight">Roll tuning</a></li><li><a href="#pitch-tuning" class="table-of-contents__link toc-highlight">Pitch tuning</a></li><li><a href="#yaw-tuning" class="table-of-contents__link toc-highlight">Yaw tuning</a></li><li><a href="#rates-smoothness" class="table-of-contents__link toc-highlight">Rates smoothness</a></li><li><a href="#other-notes" class="table-of-contents__link toc-highlight">Other notes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Manufacturers/intro">Manufacturers</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Tuning/intro">Tuning</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Developers/intro">Developers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/6QUySXdEvd" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Video Blog</a></li><li class="footer__item"><a href="https://github.com/rotorflight" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Team Rotorflight. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8c71fdc7.js"></script>
<script src="/assets/js/main.6d28e338.js"></script>
</body>
</html>